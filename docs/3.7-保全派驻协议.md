# 保全派驻协议

**请注意 JSON 文件是不支持注释的，文本中的注释仅用于演示，请勿直接复制使用**

```jsonc
{
    "type": "SSS",                         // 协议类型，SSS 表示保全派驻，必选，不可修改
    "stage_name": "多索雷斯在建地块",       // 保全派驻地图名，必选
    "minimum_required": "v4.9.0",          // 最低要求 maa 版本号，必选
    "doc": {                               // 描述，可选
        "title": "低练度高成功率作业",
        "title_color": "dark",
        "details": "对练度要求很低balabala……", // 建议在这里写上你的名字！（作者名）、参考的视频攻略链接等
        "details_color": "dark"
    },
    "buff": "自适应补给元件",               // 开局导能元件选择，可选
    "equipment": [                         // 开局装备选择，横着数，可选
        "A", "A", "A", "A",
        "B", "B", "B", "B"
    ],
    "strategy": "优选策略",                 // 或者 自由策略，可选
    "operators": [                         // 指定干员，可选
        {
            "name": "棘刺",
            "skill": 3,
            "skill_usage": 1
        }
    ],
    "tool_man": {                          // 剩余所需各职业人数，按费用排序随便拿，可选
        "Pioneer": 13,
        "Warrior": 2,
        "Medic": 2
    },
    "drop_buff": [                         // 战斗后拿buff的优先级。好像只有第四层有？可选
        "定向部署支援系统"
    ],
    "drop_tool_man": [                     // 战斗结束后招募干员职业的优先级，可选
        "空弦",
        "能天使",
        "Pioneer",
        "Support",
        "None"      // 不招人
    ],
    "stages": {
        "stage_1": {
            "stage_name": "蜂拥而上",       // 单层关卡名，必选
                                           // 支持 name, stageId, levelId，推荐 stageId 或 levelId
                                           // 请勿使用 code（例如 LT-1），因为会和其他保全关卡冲突

            "strategies": [                // 必选
                                           // 会按部署各 object 里的 tool_man，如果当前手牌都没有，才会部署下一个 object 里的
                {
                    "core": "棘刺",
                    "tool_man": {
                        "Pioneer": 1,
                        "Warrior": 1,
                        "Medic": 1
                    },
                    "location": [
                        10,
                        1
                    ],
                    "direction": "Left"
                },
                {
                    "core": "泥岩",
                    "tool_man": {
                        "Pioneer": 1,
                        "Warrior": 1,
                        "Medic": 1
                    },
                    "location": [
                        2,
                        8
                    ],
                    "direction": "Left"
                },
                {
                    // 不填写 core，可以用于部署辅助过牌的之类的
                    "tool_man": {
                        "Support": 100
                    },
                    "location": [
                        2,
                        8
                    ],
                    "direction": "Left"
                }
            ],
            "draw_as_possible": true,   // “调配干员”按钮，是否好了就用，可选，默认 true
            
            "actions": [                // 可选
                                        // 基本复用抄作业的逻辑，可参考 3.3-战斗流程协议.md
                                        // 符合 action 的条件就执行 action，否则执行上面的 strategies 的逻辑
                {
                    "type": "调配干员"  // 新 type，“调配干员” 按钮，点一下，在 "draw_as_possible" 为 true 时无效
                },
                {
                    "type": "CheckAndAbandon", // 新 type，检查干员在不在，不在就退出重开
                    "name": "棘刺"
                },
                {
                    "type": "CheckAndAbandon", // 检查干员在不在，不在就退出重开
                    "tool_man": "Pioneer",
                    "count": 2
                },
                {
                    "name": "桃金娘",
                    "location": [
                        4,
                        5
                    ],
                    "direction": "左"
                },
                {
                    "kills": 10,
                    "type": "撤退",
                    "name": "桃金娘"
                }
            ],
            "retry_times": 3 // 战斗失败重试次数，超过了直接放弃整局
        },
        "stage_2": {
            "stage_name": "见者有份"
            // ...
        }
        // 写几关打几关，比如只写到了 4，则打完 4 自动重开
    }
}
```
